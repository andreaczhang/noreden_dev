---
title: "Problem definition"
format: 
  html:
    code-fold: false
    code-tools: false
editor: source
---

# Understand the data

Load the aggregated food groups and their attributes. We have 25 food groups.

```{r}
#| label: load-food-info
#| echo: true
#| eval: true

foods <- read.csv('data/foods.csv', sep = ',')
data.table::setDT(foods) # use data.table format
head(foods) 
```


Define the constraints on 

* energy
* protein, fat, carbs, sugar, alcohol 
* GHGE (greenhouse gas equivalent)

```{r}
#| label: load-contraints
#| echo: true
#| eval: true

constraints <- data.frame(
  constraint = c('lower', 'upper'), 
  energy = c(9000, 10000), 
  protein = c(55, 111.5), 
  fat = c(61.8, 98.8), 
  carbs = c(250, 334.6), 
  sugar = c(0, 54.8), 
  alcohol = c(0, 10),
  ghge = c(0, 4.7)
)
constraints
```


Now we can examine whether the current intake satisfy the constraints. 

```{r}
#| label: check-current
#| echo: true
#| eval: true

t(as.matrix(foods$intake)) %*% as.matrix(foods[, .(energy, protein, fat, carbs, sugar, alcohol, ghge)])
```

It looks like all categories but carbs fall within the expected range. Carb is slighter lower than the lower threshold. 


